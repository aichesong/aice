<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <title>移动端使用localResizeIMG4压缩图片</title>
    <script src="__PUBLIC__/js/localResizeIMG/dist/lrz.bundle.js"></script>
    <script src="__PUBLIC__/js/localResizeIMG/dist/zepto.min.js"></script>
</head>

<body>

<div style="margin-top: 10%;text-align: center" >
    <span  style="font-size: 40px;">请依次上传证件照片 </span>
</div>

<div  style="text-align: center;margin-top: 10%">
    <span  style="font-size: 35px"> 请上传驾驶证图片：&nbsp&nbsp&nbsp </span>
    <input type="file" capture="camera"  style="width: 30%;height: 100px"  accept="image/*" name="logo" id="file">
</div>



<div  style="text-align: center;margin-top: 10%">
    <span  style="font-size: 35px"> 请上传身份证正面照：</span>
    <input type="file" capture="camera"  style="width: 30%;height: 100px"  accept="image/*" name="logo_head" id="head">
</div>


<div  style="text-align: center;margin-top: 10%">
    <span  style="font-size: 35px"> 请上传身份证反面照：</span>
    <input type="file" capture="camera"  style="width: 30%;height: 100px"  accept="image/*" name="logo_head_back" id="head_back">
</div>

<div  style="text-align: center;margin-top: 10%">
    <span  style="font-size: 35px"> 请上传银行卡正面照：</span>
    <input type="file" capture="camera"  style="width: 30%;height: 100px"  accept="image/*" name="logo_credit" id="credit">
</div>

<div  style="text-align: center;margin-top: 10%">
    <span  style="font-size: 35px"> 请上传银行卡反面照：</span>
    <input type="file" capture="camera"  style="width: 30%;height: 100px"  accept="image/*" name="logo_credit_back" id="credit_back">
</div>


<div style="text-align: center;margin-top: 10%">
    <div id="DivUp" style="display: none">
        <input type="submit" data-inline="true"  onclick="uploadclick()"  style="text-align: center;width: 30% ;height: 80px"  id="BtnUp" value="上传成功" data-mini="true" />
    </div>
</div>


<!--<script type="text/javascript" src="__PUBLIC__/static/js/layer/layer.js"></script>-->
<script type="text/javascript">

    function  uploadclick(){
        location.href = '/index.php?mobile/index/index.html';
    }

    $(function(){
//        code   用数字标识   1：表示上传的是驾驶证    2：表示上传的是身份证正面照   3：表示上传的身份证反面照   4：银行卡正面照   5：  银行卡反面照
//        驾驶证
        $('input[name=logo]').on('change', function(){
            lrz(this.files[0], {width: 640})
                .then(function (rst) {
//                    console.log(rst);
                    $.ajax({
                        url: '/mobile/User/ajax_submit',
                        type: 'post',
                        data: {img: rst.base64, code : 1},
                        dataType: 'json',
                        timeout: 200000,
                        success: function (response) {
                            if (response.ecd == '0') {
                                alert('成功');
                                return true;
                            } else {
//                                 layer.alert('上传成功');
                                return alert('驾驶证上传成功');
                            }
                        },

                        error: function (jqXHR, textStatus, errorThrown) {

                            if (textStatus == 'timeout') {
                                a_info_alert('请求超时');

                                return false;
                            }

//                            alert(jqXHR.responseText);
                        }
                    });

                })
                .catch(function (err) {

                })
                .always(function () {

                });
        });

//      身份证正面照
        $('input[name=logo_head]').on('change', function(){
            lrz(this.files[0], {width: 640})
                .then(function (rst) {
//                    console.log(rst);
                    $.ajax({
                        url: '/mobile/User/ajax_submit',
                        type: 'post',
                        data: {img: rst.base64,code : 2},
                        dataType: 'json',
                        timeout: 200000,
                        success: function (response) {
                            if (response.ecd == '0') {
                                alert('成功');
                                return true;
                            } else {
//                                 layer.alert('上传成功');
                                return alert('身份证正面照上传成功');
                            }
                        },

                        error: function (jqXHR, textStatus, errorThrown) {

                            if (textStatus == 'timeout') {
                                a_info_alert('请求超时');

                                return false;
                            }

//                            alert(jqXHR.responseText);
                        }
                    });

                })
                .catch(function (err) {

                })
                .always(function () {

                });
        });

//        身份证反面照
        $('input[name=logo_head_back]').on('change', function(){
            lrz(this.files[0], {width: 640})
                .then(function (rst) {
//                    console.log(rst);
                    $.ajax({
                        url: '/mobile/User/ajax_submit',
                        type: 'post',
                        data: {img: rst.base64,code : 3},
                        dataType: 'json',
                        timeout: 200000,
                        success: function (response) {
                            if (response.ecd == '0') {
                                alert('成功');
                                return true;
                            } else {
//                                 layer.alert('上传成功');
                                return alert('身份证反面照上传成功');
                            }
                        },

                        error: function (jqXHR, textStatus, errorThrown) {

                            if (textStatus == 'timeout') {
                                a_info_alert('请求超时');

                                return false;
                            }

//                            alert(jqXHR.responseText);
                        }
                    });

                })
                .catch(function (err) {

                })
                .always(function () {

                });
        });

//        银行卡正面照
        $('input[name=logo_credit]').on('change', function(){
            lrz(this.files[0], {width: 640})
                .then(function (rst) {
//                    console.log(rst);
                    $.ajax({
                        url: '/mobile/User/ajax_submit',
                        type: 'post',
                        data: {img: rst.base64,code :4},
                        dataType: 'json',
                        timeout: 200000,
                        success: function (response) {
                            if (response.ecd == '0') {
                                alert('成功');
                                return true;
                            } else {
//                                 layer.alert('上传成功');
                                return alert(' 银行卡正面照上传成功');
                            }
                        },

                        error: function (jqXHR, textStatus, errorThrown) {

                            if (textStatus == 'timeout') {
                                a_info_alert('请求超时');

                                return false;
                            }

//                            alert(jqXHR.responseText);
                        }
                    });

                })
                .catch(function (err) {

                })
                .always(function () {

                });
        });

//        银行卡反面照
        $('input[name=logo_credit_back]').on('change', function(){
            lrz(this.files[0], {width: 640})
                .then(function (rst) {
//                    console.log(rst);
                    $.ajax({
                        url: '/mobile/User/ajax_submit',
                        type: 'post',
                        data: {img: rst.base64,code :5},
                        dataType: 'json',
                        timeout: 200000,
                        success: function (response) {
                            if (response.ecd == '0') {
                                alert('成功');
                                return true;
                            } else {
//                                 layer.alert('上传成功');
                                return alert(' 银行卡正面照上传成功');
                            }
                        },

                        error: function (jqXHR, textStatus, errorThrown) {

                            if (textStatus == 'timeout') {
                                a_info_alert('请求超时');

                                return false;
                            }

//                            alert(jqXHR.responseText);
                        }
                    });

                })
                .catch(function (err) {

                })
                .always(function () {

                });

            return document.getElementById("DivUp").style.display = "block",
                !0
        });


    });
</script>
</body>